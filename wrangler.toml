# FaxBella - Cloudflare Pages/Workers Deployment
# https://faxbella.com
#
# Deploy: npx wrangler pages deploy
# Dev:    npx wrangler pages dev .next
#
# Environment variables are set in the Cloudflare Dashboard under
# Settings > Environment Variables (never commit secrets here).

name = "faxbella"
compatibility_date = "2025-12-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".open-next/assets"

# Main worker entry point (generated by OpenNext)
main = ".open-next/worker.js"

[vars]
ENVIRONMENT = "production"

# Static asset serving
[site]
bucket = ".open-next/assets"

# Custom domain
# Configured in Cloudflare Dashboard > Pages > Custom Domains
# Primary: faxbella.com
# Redirect: www.faxbella.com -> faxbella.com

# Build settings for Cloudflare Pages
[build]
command = "npx open-next build"

# Rate limiting (optional - configured in Dashboard)
# Recommended: 100 requests/min for API routes

# Caching rules
[[rules]]
type = "Data"
globs = ["**/*.json"]
fallthrough = true
