# API Configuration
# Note: In Docker, /faxdata is mounted as a volume (see compose)
FAX_DATA_DIR=/faxdata
MAX_FILE_SIZE_MB=10
FAX_DISABLED=false
API_KEY=your_secure_api_key_here
# Enforce API key on all requests even if API_KEY is blank (recommended for HIPAA prod)
REQUIRE_API_KEY=false

# Backend Selection - Choose ONE or use hybrid configuration
# Options: "sip" (self-hosted), "phaxio" (cloud fetch), or "sinch" (cloud direct upload)
FAX_BACKEND=sip

# === HYBRID BACKEND CONFIGURATION (v3+) ===
# Override FAX_BACKEND for independent outbound/inbound providers
# FAX_OUTBOUND_BACKEND=sinch     # Provider for sending faxes
# FAX_INBOUND_BACKEND=sip        # Provider for receiving faxes
# If unset, both directions use FAX_BACKEND value

# === PHAXIO CLOUD BACKEND ===
# Only needed if FAX_BACKEND=phaxio
PHAXIO_API_KEY=your_phaxio_api_key_here
PHAXIO_API_SECRET=your_phaxio_api_secret_here
PUBLIC_API_URL=http://localhost:8080
# Preferred name per docs
PHAXIO_CALLBACK_URL=http://localhost:8080/phaxio-callback
# Backward‑compatible alias (either variable is accepted)
# PHAXIO_STATUS_CALLBACK_URL=http://localhost:8080/phaxio-callback
PHAXIO_VERIFY_SIGNATURE=true
ENFORCE_PUBLIC_HTTPS=false

# === SINCH FAX API v3 (Phaxio by Sinch) ===
# Only needed if FAX_BACKEND=sinch
# If left blank, SINCH_API_* fall back to PHAXIO_* values.
SINCH_PROJECT_ID=your_sinch_project_id
SINCH_API_KEY=
SINCH_API_SECRET=
# Optional region override (defaults to https://fax.api.sinch.com/v3)
# SINCH_BASE_URL=https://us.fax.api.sinch.com/v3

# === MCP SSE (OAuth2/JWT) ===
# Set these when running SSE transports (Node or Python)
OAUTH_ISSUER=
OAUTH_AUDIENCE=faxbot-mcp
OAUTH_JWKS_URL=

# === SIP/ASTERISK BACKEND ===
# Only needed if FAX_BACKEND=sip
ASTERISK_AMI_HOST=asterisk
ASTERISK_AMI_PORT=5038
ASTERISK_AMI_USERNAME=api
# WARNING: Change this in production. Do NOT leave as 'changeme'.
ASTERISK_AMI_PASSWORD=changeme

# SIP Trunk Settings (from your provider)
SIP_USERNAME=17209000233
SIP_PASSWORD=eqdcM0t689zmNVhC
SIP_SERVER=sip.t38fax.com
SIP_FROM_USER=+17209000233
SIP_FROM_DOMAIN=your-provider.example

# === COMMON SETTINGS ===
FAX_LOCAL_STATION_ID=+15551234567
FAX_HEADER=Company Name
DATABASE_URL=sqlite:///./faxbot.db
TZ=UTC

# Security Notes
# - Leaving API_KEY blank disables authentication (not recommended for public deployments)
# - Use a reverse proxy for rate limiting and IP restrictions in production
# - PDF token TTL controls how long the cloud fetch link is valid
PDF_TOKEN_TTL_MINUTES=60

# Retention (set >0 to enable automatic artifact cleanup)
ARTIFACT_TTL_DAYS=0
# Cleanup interval in minutes (default daily)
CLEANUP_INTERVAL_MINUTES=1440

# Audit logging (optional)
AUDIT_LOG_ENABLED=false
AUDIT_LOG_FORMAT=json
# AUDIT_LOG_FILE=/var/log/faxbot_audit.log
AUDIT_LOG_SYSLOG=false
AUDIT_LOG_SYSLOG_ADDRESS=/dev/log

# Per-key rate limiting (Phase 2; 0 disables)
MAX_REQUESTS_PER_MINUTE=0

# Inbound receiving (disabled by default)
INBOUND_ENABLED=false
INBOUND_RETENTION_DAYS=30
INBOUND_TOKEN_TTL_MINUTES=60
# Asterisk → API internal secret (required for SIP inbound)
ASTERISK_INBOUND_SECRET=
# Storage backend for inbound artifacts
STORAGE_BACKEND=local   # local | s3
S3_BUCKET=
S3_PREFIX=inbound/
S3_REGION=
S3_ENDPOINT_URL=        # Optional for S3-compatible (MinIO)
S3_KMS_KEY_ID=          # For SSE-KMS when using S3
# Inbound per-key rate limits
INBOUND_LIST_RPM=30
INBOUND_GET_RPM=60
